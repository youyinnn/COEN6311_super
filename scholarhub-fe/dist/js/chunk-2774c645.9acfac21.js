(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2774c645"],{"0bc6":function(t,e,a){},"3eef":function(t,e,a){t.exports=a.p+"img/alone.245a8726.png"},"4fc6":function(t,e,a){},"503f":function(t,e,a){"use strict";a("4fc6")},"6b2f":function(t,e,a){"use strict";(function(t){var i=a("b85c"),s=a("2909"),n=(a("ac1f"),a("1276"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("99af"),a("77ed"),a("5a0c"));e["a"]={data:function(){return{selectedTeamIndex:0,invitations:[],teamList:[],teamMemmberMap:null,teamActivities:[],newTeamName:"",currentTeamBoxMember:[],expandTeamList:!0,teamMemberListFadeInAminate:!0,teamMemberActivitiesAminate:!0,newMemberEmail:"",currentTeam:"",leaderOfCurrentTeam:!1}},mounted:function(){var t=this.$store.state.isLogin;t||(this.$router.push("/404"),this.errorToast("You should login first!"));var e=this;this.fetchTeam((function(){e.teamList.length>0&&(e.currentTeam=e.teamList[0],e.selectTeam(e.teamList[0]))}))},computed:{hasTeam:function(){return 0!==this.teamList.length},hasTeamInvitatuon:function(){return 0!==this.invitations.length},getUserId:function(){var e=localStorage.getItem("token"),a=JSON.parse(t.from(e.split(".")[1],"base64"));return a.id}},methods:{fetchTeam:function(t){var e=this;this.ax.get(this.config.testEnvBackEndUrl+"team/list",{},{isAuth:!0,success:function(a){var r=a.data.code,o=a.data.body;if(0===r){e.teamList=Object(s["a"])(o.joined_list);var c,l=Object(i["a"])(o.pending_list);try{for(l.s();!(c=l.n()).done;){var m=c.value;m.time=n(m.auth_create_time).format("YYYY/MM/DD HH:mm")}}catch(d){l.e(d)}finally{l.f()}e.invitations=Object(s["a"])(o.pending_list),0===e.invitations.length&&(e.invitations=[]),void 0!==t&&t()}}})},handleAuth:function(t,e){var a=this;this.ax.post(this.config.testEnvBackEndUrl+"team/invite/handle",{auth_id:t,decision:e},{isAuth:!0,success:function(t){var e=t.data.code,i=t.data.message;1!==e&&2!==e&&3!==e&&4!==e||a.errorToast(i),0===e&&a.successToast(i),a.fetchTeam()}})},createTeam:function(){var t=this;this.newTeamName?this.ax.post(this.config.testEnvBackEndUrl+"team/create",{name:this.newTeamName},{isAuth:!0,success:function(e){var a=e.data.code,i=e.data.message;1===a&&t.errorToast(i),0===a&&t.successToast(i),t.fetchTeam()}}):this.errorToast("Please input a team name.",{position:"top-right"})},fetchTeamMemberList:function(t){var e=this;this.teamMemberListFadeInAminate=!1,this.teamMemberActivitiesAminate=!1,this.ax.get(this.config.testEnvBackEndUrl+"team/member/list",{team_id:t},{isAuth:!0,success:function(a){var s=a.data.code,n=a.data.message;if(0===s){e.teamMemmberMap=new Map;var r,o=Object(i["a"])(a.data.body.member_list);try{for(o.s();!(r=o.n()).done;){var c=r.value;""===c.role_tag&&(c.role_tag="<no role>"),e.teamMemmberMap.set(c.id,c.name)}}catch(l){o.e(l)}finally{o.f()}e.currentTeamBoxMember=a.data.body.member_list,e.teamMemberListFadeInAminate=!0,e.fetchTeamMemberActivities(t)}else e.errorToast(n)}})},selectTeam:function(t){this.currentTeam=t;var e=t.leader_id;e===this.getUserId?this.leaderOfCurrentTeam=!0:this.leaderOfCurrentTeam=!1,this.fetchTeamMemberList(t.team_id)},clickMember:function(t){console.log(t)},inviteMember:function(){var t=this,e=this.newMemberEmail;e?this.ax.post(this.config.testEnvBackEndUrl+"team/invite",{team_id:this.currentTeam.team_id,invitee_email:this.newMemberEmail},{isAuth:!0,success:function(e){var a=e.data.code,i=e.data.message;1===a?t.errorToast(i):0===a?t.successToast("Invitation is sent."):t.infoToast(i)}}):this.errorToast("Please input an email.",{position:"top-right"})},fetchTeamMemberActivities:function(e){var a=this;this.ax.get(this.config.testEnvBackEndUrl+"icde/access/team-activities",{team_id:e},{isAuth:!0,success:function(e){var s=e.data.code;if(0===s){var r,o=e.data.body,c=o.records,l=localStorage.getItem("token"),m=JSON.parse(t.from(l.split(".")[1],"base64")),d=Object(i["a"])(c);try{for(d.s();!(r=d.n()).done;){var u=r.value;switch(u.create_time=n(u.create_time).format("YYYY/MM/DD HH:mm"),u.user_id===m.id?u.user_name='<span style="color: green">You</span>':u.user_name=a.teamMemmberMap.get(u.user_id),u.operation_type){case"paper_search":u.label="Searching",u.icon="mdi-text-search",u.iconColor="blue",u.content="In <strong>'".concat(u.input_text,"'</strong>");break;case"paper_detail_click":u.label="Visiting details",u.icon="mdi-card-text",u.iconColor="indigo lighten-1",u.content='<a href="'.concat(location.origin,"/#/paper/").concat(u.paper_title,"/").concat(u.paper_id,'">').concat(u.paper_title,"</a>");break;case"paper_origin_click":u.label="Visiting origin",u.icon="mdi-share",u.iconColor="red",u.content='<a href="'.concat(location.origin,"/#/paper/").concat(u.paper_title,"/").concat(u.paper_id,'">').concat(u.paper_title,"</a>");break;case"paper_like_click":u.label="Likes",u.icon="mdi-thumb-up",u.iconColor="green",u.content='<a href="'.concat(location.origin,"/#/paper/").concat(u.paper_title,"/").concat(u.paper_id,'">').concat(u.paper_title,"</a>");break;case"paper_dislike_click":u.label="Dislikes",u.icon="mdi-thumb-down",u.iconColor="orange",u.content='<a href="'.concat(location.origin,"/#/paper/").concat(u.paper_title,"/").concat(u.paper_id,'">').concat(u.paper_title,"</a>");break;case"paper_share":u.label="Shared",u.icon="mdi-share-variant",u.iconColor="cyan",u.content='<a href="'.concat(location.origin,"/#/paper/").concat(u.paper_title,"/").concat(u.paper_id,'">').concat(u.paper_title,"</a>");break;case"paper_comment":u.label="Commented",u.icon="mdi-comment-processing",u.iconColor="pink lighten-2",u.content='<a href="'.concat(location.origin,"/#/paper/").concat(u.paper_title,"/").concat(u.paper_id,'">').concat(u.paper_title,"</a>");break}}}catch(v){d.e(v)}finally{d.f()}a.teamActivities=c,a.teamMemberActivitiesAminate=!0}}})}}}}).call(this,a("b639").Buffer)},bdf1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"team-page mx-auto",attrs:{id:"team-page"}},[i("div",{staticClass:"team-list"},[i("div",{staticClass:"create-team-box"},[i("v-list",{attrs:{dense:""}},[i("v-subheader",[i("span",[t._v("Create a Team")]),i("v-spacer"),i("v-btn",{staticClass:"mr-2",attrs:{width:"60","x-small":"",color:"info"},on:{click:t.createTeam}},[t._v(" Create")])],1),i("v-text-field",{staticClass:"mt-2 mb-2 ml-4 mr-4 elevation-4",attrs:{dense:"","persistent-placeholder":"",placeholder:"team name","single-line":"","hide-details":"auto",solo:""},model:{value:t.newTeamName,callback:function(e){t.newTeamName=e},expression:"newTeamName"}})],1),i("v-divider")],1),i("transition",{attrs:{name:"he",mode:"out-in"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.leaderOfCurrentTeam,expression:"leaderOfCurrentTeam"}],key:"invite-box",staticClass:"create-team-box"},[i("v-list",{attrs:{dense:""}},[i("v-subheader",[i("span",[t._v("Invite a Member to This Team")]),i("v-spacer"),i("v-btn",{staticClass:"mr-2 white--text",attrs:{width:"60","x-small":"",color:"green"},on:{click:t.inviteMember}},[t._v(" Invite")])],1),i("v-text-field",{staticClass:"mt-2 mb-2 ml-4 mr-4 elevation-4",attrs:{dense:"","single-line":"","persistent-placeholder":"",placeholder:"email","hide-details":"auto",solo:""},model:{value:t.newMemberEmail,callback:function(e){t.newMemberEmail=e},expression:"newMemberEmail"}})],1),i("v-divider")],1)]),i("v-card",{staticClass:"mx-auto",attrs:{elevation:"0","max-width":"300",tile:""}},[i("v-list",{attrs:{dense:""}},[i("v-subheader",[i("span",[t._v("Teams")])]),i("v-list-group",{scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-icon",{staticClass:"mr-4"},[i("v-icon",[t._v("mdi-forum")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Joined")])],1)]},proxy:!0}]),model:{value:t.expandTeamList,callback:function(e){t.expandTeamList=e},expression:"expandTeamList"}},[i("v-list-item-group",{attrs:{mandatory:""},model:{value:t.selectedTeamIndex,callback:function(e){t.selectedTeamIndex=e},expression:"selectedTeamIndex"}},t._l(t.teamList,(function(e){return i("v-list-item",{key:e.team_id,on:{click:function(a){return t.selectTeam(e)}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-menu-right")])],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1),i("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:e.leader_id===t.getUserId,expression:"team.leader_id === getUserId"}]},[i("v-icon",[t._v("mdi-account-tie")])],1)],1)})),1)],1),i("v-list-group",{scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-icon",{staticClass:"mr-4"},[i("v-icon",[t._v("mdi-account-multiple-plus-outline")])],1),i("v-list-item-content",[i("v-list-item-title",{staticClass:"d-flex align-center"},[i("span",{staticClass:"mr-2"},[t._v("Invitations")]),i("v-badge",{staticClass:"ma-0",attrs:{inline:"",color:"primary",content:0==t.invitations.length?"0":t.invitations.length}})],1)],1)]},proxy:!0}])},[i("v-list-item-group",t._l(t.invitations,(function(e,a){return i("v-list-item",{key:a,attrs:{"two-line":""}},[i("v-list-item-title",{staticStyle:{padding:"5px"}},[i("p",{staticClass:"ma-0 mb-2 clearfix"},[i("span",{staticStyle:{float:"left"}},[t._v("From: "+t._s(e.name))]),i("span",{staticStyle:{float:"right","font-weight":"300"}},[t._v(t._s(e.time))])]),i("div",[i("v-btn",{staticStyle:{float:"right"},attrs:{"x-small":"",color:"error"},on:{click:function(a){return t.handleAuth(e.auth_id,3)}}},[t._v("Reject")]),i("v-btn",{staticClass:"mr-4",staticStyle:{float:"right"},attrs:{"x-small":"",color:"success"},on:{click:function(a){return t.handleAuth(e.auth_id,1)}}},[t._v("Accept")])],1)])],1)})),1)],1)],1)],1)],1),i("div",{staticClass:"team-box"},[t.hasTeam?i("div",{staticClass:"has-team"},[i("v-card",{staticClass:"team-activities-box",attrs:{elevation:"5"}},[i("v-card-text",{staticStyle:{"font-weight":"900","font-size":"16px","font-family":"'Roboto'"}},[t._v("Member activities of < "),i("strong",[t._v(t._s(t.currentTeam.name))]),t._v(" > ")]),i("v-divider"),i("div",{class:{"timeline-box":!0,animate__animated:!0,animate__fadeIn:t.teamMemberActivitiesAminate}},[0===t.teamActivities.length?i("v-timeline",{key:"no-team-activities",attrs:{"align-top":"",dense:""}},[i("v-timeline-item",{attrs:{small:""}},[i("div",{staticClass:"text-subtitle-2"}),i("div",{staticClass:"text-body-2"},[t._v("No activities here.")])])],1):t._e(),t._l(t.teamActivities,(function(e){return i("v-timeline",{key:e.id,attrs:{"align-top":"",dense:""}},[i("v-timeline-item",{attrs:{small:"","fill-dot":"",color:e.iconColor,icon:e.icon}},[i("div",{staticClass:"d-flex align-center text-subtitle-2 mb-2"},[i("strong",{staticClass:"mr-2",domProps:{innerHTML:t._s(e.user_name)}}),i("strong",{staticClass:"mr-2"},[t._v(t._s(e.label))]),i("span",[t._v(t._s(e.create_time))])]),i("div",{staticClass:"text-body-2",domProps:{innerHTML:t._s(e.content)}})])],1)}))],2)],1),i("v-card",{staticClass:"team-member-box",attrs:{elevation:"5"}},[i("v-card-text",[t._v("Team member")]),i("v-divider"),i("v-list-item-group",{class:{"team-member-group-box":!0,animate__animated:!0,animate__fadeIn:t.teamMemberListFadeInAminate}},t._l(t.currentTeamBoxMember,(function(e){return i("v-list-item",{key:t.selectedTeamIndex+"-"+e.email,attrs:{dense:"","three-line":""},on:{click:function(a){return t.clickMember(e)}}},[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e.name))]),i("v-list-item-subtitle",[t._v(" "+t._s(e.role_tag)+" ")]),i("v-list-item-subtitle",[t._v(" "+t._s(e.email)+" ")])],1)],1)})),1)],1)],1):i("div",{staticClass:"align-center d-flex fill-height justify-center no-team"},[i("div",{staticClass:"unselectable",staticStyle:{transform:"translateY(-20px)"}},[i("v-img",{attrs:{height:"250",width:"250",src:a("3eef")}}),i("div",{staticClass:"mt-4 text-button",staticStyle:{"text-align":"center"}},[t._v(" You haven't join a team yet! ")]),i("div",{staticClass:"text-button",staticStyle:{"text-align":"center"}},[t._v("Find a team~")])],1)])])])},s=[],n=a("6b2f"),r=n["a"],o=(a("503f"),a("2877")),c=a("6544"),l=a.n(c),m=a("15fd"),d=a("5530"),u=(a("a9e3"),a("ff44"),a("132d")),v=a("a9ad"),h=a("7560"),f=a("f2e7"),p=a("2b0e"),b=p["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),g=a("fe6c"),_=a("58df"),x=a("80d2"),T=["aria-atomic","aria-label","aria-live","role","title"],C=Object(_["a"])(v["a"],Object(g["b"])(["left","bottom"]),h["a"],f["a"],b).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes:function(){return Object(d["a"])({"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile},this.themeClasses)},computedBottom:function(){return this.bottom?"auto":this.computedYOffset},computedLeft:function(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight:function(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop:function(){return this.bottom?this.computedYOffset:"auto"},computedXOffset:function(){return this.calcPosition(this.offsetX)},computedYOffset:function(){return this.calcPosition(this.offsetY)},isRtl:function(){return this.$vuetify.rtl},offset:function(){return this.overlap?this.dot?8:12:this.dot?2:4},styles:function(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition:function(t){return"calc(100% - ".concat(Object(x["f"])(t||this.offset),")")},genBadge:function(){var t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),i=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[i]):i},genBadgeContent:function(){if(!this.dot){var t=Object(x["q"])(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(u["a"],this.icon):void 0)}},genBadgeWrapper:function(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render:function(t){var e=[this.genBadgeWrapper()],a=[Object(x["q"])(this)],i=this.$attrs,s=(i["aria-atomic"],i["aria-label"],i["aria-live"],i.role,i.title,Object(m["a"])(i,T));return this.inline&&this.left?a.unshift(e):a.push(e),t("span",{staticClass:"v-badge",attrs:s,class:this.classes},a)}}),y=a("8336"),k=a("b0af"),M=a("99d9"),w=a("ce7e"),I=a("adda"),L=a("8860"),O=a("56b0"),S=a("da13"),A=a("5d23"),B=a("1baa"),E=a("34c3"),V=a("2fa4"),j=a("e0c7"),$=a("8654"),Y=a("8414"),N=a("1e06"),U=Object(o["a"])(r,i,s,!1,null,"09171c84",null);e["default"]=U.exports;l()(U,{VBadge:C,VBtn:y["a"],VCard:k["a"],VCardText:M["c"],VDivider:w["a"],VIcon:u["a"],VImg:I["a"],VList:L["a"],VListGroup:O["a"],VListItem:S["a"],VListItemContent:A["a"],VListItemGroup:B["a"],VListItemIcon:E["a"],VListItemSubtitle:A["b"],VListItemTitle:A["c"],VSpacer:V["a"],VSubheader:j["a"],VTextField:$["a"],VTimeline:Y["a"],VTimelineItem:N["a"]})},e0c7:function(t,e,a){"use strict";var i=a("5530"),s=(a("0bc6"),a("7560")),n=a("58df");e["a"]=Object(n["a"])(s["a"]).extend({name:"v-subheader",props:{inset:Boolean},render:function(t){return t("div",{staticClass:"v-subheader",class:Object(i["a"])({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},ff44:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2774c645.9acfac21.js.map